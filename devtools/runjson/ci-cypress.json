[
  {
    "Name": "Backend",
    "Command": [
      "bin/goalert",
      "-l=localhost:3042",
      "--db-url=postgres://goalert@localhost:5432/goalert?sslmode=disable",
      "--log-requests=false",
      "--slack-base-url=http://localhost:3040/slack",
      "--twilio-base-url=http://localhost:3040/twilio"
    ]
  },
  {
    "Name": "Slack",
    "Command": [
      "bin/mockslack",
      "-client-id=000000000000.000000000000",
      "-client-secret=00000000000000000000000000000000",
      "-access-token=xoxp-000000000000-000000000000-000000000000-00000000000000000000000000000000",
      "-prefix=/slack",
      "-single-user=bob",
      "-addr=localhost:3046"
    ]
  },
  {
    "Name": "Twilio",
    "Restart": true,
    "Watch": true,
    "Command": [
      "bin/mocktwilio",
      "-account-sid=AC00000000000000000000000000000000",
      "-auth-token=11111111111111111111111111111111",
      "-sms=+17635550123=http://localhost:3040/api/v2/twilio/message",
      "-voice=+17635550123=http://localhost:3040/api/v2/twilio/call",
      "-prefix=/twilio",
      "-addr=localhost:3047"
    ]
  },
  {
    "Name": "Proxy",
    "Command": [
      "bin/simpleproxy",
      "-addr=localhost:3040",
      "/slack/=http://localhost:3046",
      "/twilio/=http://localhost:3047",
      "http://localhost:3042"
    ]
  },
  {
    "Name": "Cypress",
    "Before": {
      "Name": "BE Wait",
      "Command": ["bin/waitfor", "http://localhost:3042"]
    },
    "Command": [
      "./node_modules/.bin/cypress",
      "run",
      "--config",
      "baseUrl=http://localhost:3040"
    ],
    "Env": [
      "CYPRESS_DB_URL=postgres://goalert@localhost:5432/goalert?sslmode=disable"
    ],
    "Dir": "web/src",
    "ExitAfter": true
  }
]
